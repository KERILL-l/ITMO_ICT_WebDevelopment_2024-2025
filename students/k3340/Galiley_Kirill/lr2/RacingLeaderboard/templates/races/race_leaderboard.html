{% extends 'races/base.html' %}

{% block title %}Таблица результатов - {{ race.name }}{% endblock %}

{% block content %}
<h1 class="mb-4">Таблица результатов: {{ race.name }}</h1>
<p><strong>Дата:</strong> {{ race.date|date:"d.m.Y H:i" }}</p>
<p><strong>Место:</strong> {{ race.location }}</p>

<table class="table table-hover table-striped">
    <thead class="table-dark">
        <tr>
            <th>Место</th>
            <th>Водитель</th>
            <th>Команда</th>
            <th>Автомобиль</th>
            <th>Время</th>
            <th>Очки</th>
        </tr>
    </thead>
    <tbody>
        {% for result in results %}
        <tr>
            <td><strong class="badge bg-primary">{{ result.position }}</strong></td>
            <td>
                <a href="{% url 'driver_detail' result.driver.id %}">
                    {{ result.driver.user.first_name }} {{ result.driver.user.last_name }}
                </a>
            </td>
            <td>{{ result.driver.team.name|default:"Без команды" }}</td>
            <td>{{ result.driver.car.brand }} {{ result.driver.car.model }}</td>
            <td>{{ result.time|default:"—" }}</td>
            <td><strong>{{ result.points }}</strong></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{% url 'race_detail' race.id %}" class="btn btn-secondary">← Назад к гонке</a>
{% endblock %}

